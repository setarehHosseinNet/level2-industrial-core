# راهنمای اجرای پروژه Level2 و سرور OPC UA

## ۱. نصب پیش‌نیازها

ابتدا اطمینان حاصل کنید که Python 3.9 یا بالاتر نصب است. سپس وارد پوشه پروژه شوید و دستورات زیر را اجرا کنید:

```bash
pip install -r requirements.txt
```

در صورت نیاز فقط پکیج `opcua` را نصب کنید:
```bash
pip install opcua
```


## ۲. اجرای سرور شبیه‌سازی شده OPC UA

برای تست خواندن اطلاعات از OPC UA، می‌توانید سرور داخلی پروژه را اجرا کنید:

```bash
python opc/server_sim.py
```

اگر موفق بود:
✅ پیام `OPC UA Server is running at opc.tcp://0.0.0.0:4840` را مشاهده می‌کنید.

در این حالت، سه متغیر `Temperature`, `Status`, `Position` هر ۵ ثانیه به‌روزرسانی می‌شوند.


## ۳. اجرای برنامه اصلی

```bash
python main.py
```

این برنامه:
- یک ذوب (heat) ثبت می‌کند
- چند رویداد به آن اختصاص می‌دهد
- داده‌ها را در پایگاه داده ذخیره می‌کند
- دمای هدف و کیفیت محصول را محاسبه و چاپ می‌کند


## نکات رفع خطا

اگر با خطای `from opcua import Server` یا `Client` مواجه شدید:

```bash
python -m pip install opcua
```

برای مشاهده نسخه نصب‌شده:
```bash
pip show opcua
```

در صورتی که از محیط Conda استفاده می‌کنید:
```bash
conda install -c conda-forge opcua
```


## ۴. گام‌های بعدی پیشنهادی

- اتصال به سرور واقعی Prosys یا PLC
- ذخیره مقادیر خوانده‌شده از OPC در پایگاه داده
- ساخت داشبورد گزارش‌گیری با Streamlit
- توسعه ماژول‌های توقفات، آلارم، انرژی و ...

موفق باشید 🌟
